<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Go语言：注释、变量、常量、简单类型和复杂类型 | 绝弹博客</title>
    <meta name="description" content="一位前端开发者的博客">
    <meta name="generator" content="VitePress v1.0.0-rc.32">
    <link rel="preload stylesheet" href="/assets/style.k0VUZES6.css" as="style">
    
    <script type="module" src="/assets/app.lGvmnHE5.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.bvIUbFQP.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.3EKbrk2Y.js">
    <link rel="modulepreload" href="/assets/chunks/index.ZfaOl_DI.js">
    <link rel="modulepreload" href="/assets/chunks/theme.QViLaWyQ.js">
    <link rel="modulepreload" href="/assets/chunks/index.J09vMTAn.js">
    <link rel="modulepreload" href="/assets/go_02.var_index.md.ZU2ezGIE.lean.js">
    <meta name="keywords" content="绝弹博客|绝弹|博客|前端开发|后端开发|技术|web|框架">
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-238ebcef><!--[--><!--]--><!--[--><span tabindex="-1" data-v-adaf9da8></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-adaf9da8> Skip to content </a><!--]--><!----><header class="VPNav" data-v-238ebcef data-v-1237396b><div class="VPNavBar" data-v-1237396b data-v-8109a213><div class="container" data-v-8109a213><div class="title" data-v-8109a213><div class="VPNavBarTitle" data-v-8109a213 data-v-2e68a369><a class="title" href="/" data-v-2e68a369><!--[--><!--]--><!--[--><img class="VPImage logo" src="/favicon.ico" alt data-v-109b9219><!--]--><!--[-->绝弹博客<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-8109a213><div class="curtain" data-v-8109a213></div><div class="content-body" data-v-8109a213><!--[--><!--]--><div class="VPNavBarSearch search" data-v-8109a213><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-8109a213 data-v-81cade2c><span id="main-nav-aria-label" class="visually-hidden" data-v-81cade2c>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-81cade2c data-v-dd81116f><!--[--><span class="i-icon-park-outline-home mr-1" data-v-dd81116f></span> 首页<!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/archive/" tabindex="0" data-v-81cade2c data-v-dd81116f><!--[--><span class="i-icon-park-outline-time mr-1" data-v-dd81116f></span> 归档<!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/about/" tabindex="0" data-v-81cade2c data-v-dd81116f><!--[--><span class="i-icon-park-outline-user mr-1" data-v-dd81116f></span> 关于<!--]--></a><!--]--><!--]--></nav><!----><!----><!----><!----><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8109a213 data-v-99bb6966><span class="container" data-v-99bb6966><span class="top" data-v-99bb6966></span><span class="middle" data-v-99bb6966></span><span class="bottom" data-v-99bb6966></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav fixed reached-top" data-v-238ebcef data-v-9c05e30a><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-9c05e30a data-v-a6f0c0f1><button data-v-a6f0c0f1>Return to top</button><!----></div></div><!----><div class="VPContent" id="VPContent" data-v-238ebcef data-v-ba0bbc3d><div class="VPDoc has-aside" data-v-ba0bbc3d data-v-fa248dc2><!--[--><!--]--><div class="container" data-v-fa248dc2><div class="aside" data-v-fa248dc2><div class="aside-curtain" data-v-fa248dc2></div><div class="aside-container" data-v-fa248dc2><div class="aside-content" data-v-fa248dc2><div class="VPDocAside" data-v-fa248dc2 data-v-eaad65c7><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-eaad65c7 data-v-f25e30cd><div class="content" data-v-f25e30cd><div class="outline-marker" data-v-f25e30cd></div><div class="outline-title" role="heading" aria-level="2" data-v-f25e30cd>本篇目录</div><nav aria-labelledby="doc-outline-aria-label" data-v-f25e30cd><span class="visually-hidden" id="doc-outline-aria-label" data-v-f25e30cd> Table of Contents for current page </span><ul class="root" data-v-f25e30cd data-v-eb0b22f7><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-eaad65c7></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-fa248dc2><div class="content-container" data-v-fa248dc2><!--[--><!--[--><!--[--><div data-v-ff82ea4b><h1 class="doc-title" data-v-ff82ea4b>Go语言：注释、变量、常量、简单类型和复杂类型</h1><div class="w-full text-gray-500 text-xs flex items-center gap-3 border-b border-slate-200 pb-4 mt-4 mb-6" data-v-ff82ea4b><div data-v-ff82ea4b><span class="i-icon-park-outline-user" data-v-ff82ea4b></span> 绝弹 </div><time datetime="2023-09-07T19:17:00.000Z" title="2023-09-07T19:17:00.000Z" data-v-ff82ea4b><span class="i-icon-park-outline-time" data-v-ff82ea4b></span> 2023年09月07日</time></div></div><!--]--><!--]--><!--]--><!----><main class="main" data-v-fa248dc2><div style="position:relative;" class="vp-doc _go_02_var_" data-v-fa248dc2><div><p>Go 语言的创建者也是 C 语言的创建者之一，因此不少语法都有 C 语言语法的影子。例如，程序入口为 main 函数，函数 printf 命名，注释使用 // 开头等。此外，GO 语言也有自己的特殊语法，例如使用 := 声明短变量，函数支持多返回值，公有函数首字母大写等。</p><h2 id="注释" tabindex="-1">注释 <a class="header-anchor" href="#注释" aria-label="Permalink to &quot;注释&quot;">​</a></h2><p>Go 使用 C 语言风格的注释，其中单行注释使用双斜杠开头，如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#6A737D;">// 单行注释</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> name </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> &quot;juetan&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>多行注释使用斜杠和星号开头，如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#6A737D;">/*</span></span>
<span class="line"><span style="color:#6A737D;">* 多行注释</span></span>
<span class="line"><span style="color:#6A737D;">*/</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> name </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> &quot;juetan&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="变量" tabindex="-1">变量 <a class="header-anchor" href="#变量" aria-label="Permalink to &quot;变量&quot;">​</a></h2><p>变量，变指可以改变，量指作用域(在 Go 中作用域只有函数作用域和全局作用域)，语法如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> &lt;name</span><span style="color:#D73A49;">&gt;</span><span style="color:#D73A49;"> &lt;</span><span style="color:#24292E;">type</span><span style="color:#D73A49;">&gt;</span><span style="color:#D73A49;"> =</span><span style="color:#D73A49;"> &lt;</span><span style="color:#24292E;">value</span><span style="color:#D73A49;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>其中，变量类型和初始值至少提供一个即可。当只提供类型时，默认值为零值(字符串的零值为 &quot;&quot;，整型的零值为 0，布尔的零值为 false)。如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> name </span><span style="color:#D73A49;">string</span><span style="color:#24292E;">;                     </span><span style="color:#6A737D;">// 提供类型，初始值值为：&quot;&quot;</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> age </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;"> 18</span><span style="color:#24292E;">;                        </span><span style="color:#6A737D;">// 提供初始值，类型推导为 int</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> email </span><span style="color:#D73A49;">string</span><span style="color:#D73A49;"> =</span><span style="color:#032F62;"> &quot;1@exmple.com&quot;</span><span style="color:#24292E;">;   </span><span style="color:#6A737D;">// 同时提供</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>变量声明可以分组，使用圆括号包裹声明内容，等号左边是变量名和类型，多个变量名以逗号隔开，可同时为多个变量指定同一类型，等号右边是变量值，多个变量值以逗号隔开，如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> ( x, y </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> );        </span><span style="color:#6A737D;">// 同类型</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> (z, z1 </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;"> 1</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;1&quot;</span><span style="color:#24292E;">);    </span><span style="color:#6A737D;">// 带默认值</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在函数内部，可使用 name := value 语法声明短变量，因而 var 常用于声明全局变量，而 := 用于声明函数内的变量，同时声明多个短变量时可覆盖同名变量，但至少得有一个新变量，如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#24292E;">in, err </span><span style="color:#D73A49;">:=</span><span style="color:#24292E;"> os.</span><span style="color:#005CC5;">Open</span><span style="color:#24292E;">(infile)</span></span>
<span class="line"><span style="color:#24292E;">out, err </span><span style="color:#D73A49;">:=</span><span style="color:#24292E;"> os.</span><span style="color:#005CC5;">Create</span><span style="color:#24292E;">(outfile) </span><span style="color:#6A737D;">// out 是新变量，err 覆盖前面的同名变量</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>_ 是一个特殊变量，任何赋予它的值都会被丢弃。</p><h2 id="常量" tabindex="-1">常量 <a class="header-anchor" href="#常量" aria-label="Permalink to &quot;常量&quot;">​</a></h2><p>常量，常指禁止改变，量指作用域(同变量)，语法如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#D73A49;"> &lt;</span><span style="color:#24292E;">name</span><span style="color:#D73A49;">&gt;</span><span style="color:#D73A49;"> &lt;</span><span style="color:#24292E;">type</span><span style="color:#D73A49;">&gt;</span><span style="color:#D73A49;"> =</span><span style="color:#D73A49;"> &lt;</span><span style="color:#24292E;">value</span><span style="color:#D73A49;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>以上，语法类似于变量，但名字通常大写，值必须指定，类型可以忽略(编译器推断)，通常用于固定值的声明，示例如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> PI </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;"> 3.131492654</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> (                   </span><span style="color:#6A737D;">// 分组</span></span>
<span class="line"><span style="color:#24292E;">  x uint16 </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;"> 100</span></span>
<span class="line"><span style="color:#24292E;">  y                       </span><span style="color:#6A737D;">// y 和 x 相等</span></span>
<span class="line"><span style="color:#24292E;">  z </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;"> 10</span></span>
<span class="line"><span style="color:#24292E;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>iota 是一个特殊的关键字，在常量表达式中使用会自动递增，如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">  MAN </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;"> iota</span><span style="color:#6A737D;">      // 0</span></span>
<span class="line"><span style="color:#24292E;">  FAMA            </span><span style="color:#6A737D;">// 1</span></span>
<span class="line"><span style="color:#24292E;">  UNKNOWN         </span><span style="color:#6A737D;">// 2</span></span>
<span class="line"><span style="color:#24292E;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="简单类型" tabindex="-1">简单类型 <a class="header-anchor" href="#简单类型" aria-label="Permalink to &quot;简单类型&quot;">​</a></h2><p>简单变量，指的是存储在栈结构上，长度相对固定且占用内存不大的数据结构，例如字符串、数字和布尔等数据类型。简单变量是基础，复杂变量如数组等也是由这些类型封装而成的。</p><h3 id="字符串" tabindex="-1">字符串 <a class="header-anchor" href="#字符串" aria-label="Permalink to &quot;字符串&quot;">​</a></h3><p>使用单引号(<code>&#39;</code>)进行声明字符，使用双引号(<code>&quot;</code>)或反引号(```)声明字符串，使用双引号会处理字符串中的转义符，而反引号会原样输出，此外反引号还可以声明多行字符串。</p><div class="language-Go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">Go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> s1 </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> &quot;hello, </span><span style="color:#005CC5;">\n</span><span style="color:#032F62;"> world&quot;</span><span style="color:#6A737D;">  // \n 会转译为换行符</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> s2 </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> `hello, \n world`</span><span style="color:#6A737D;">  // 原样输出</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> s3 </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> `行1</span></span>
<span class="line"><span style="color:#032F62;">行2</span></span>
<span class="line"><span style="color:#032F62;">`</span><span style="color:#6A737D;">                           // 多行字符串</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>输出如下：</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-light vp-code"><code><span class="line"><span>hello,</span></span>
<span class="line"><span> world</span></span>
<span class="line"><span>hello, \n world</span></span>
<span class="line"><span>行1</span></span>
<span class="line"><span>        行2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="整型" tabindex="-1">整型 <a class="header-anchor" href="#整型" aria-label="Permalink to &quot;整型&quot;">​</a></h3><p>整型，分为 无符号(uint) 和 有符号(int) 两种。其中，符号指的是正负符号，无符号不包含负数，而有符号类型包含负数，u 是 unsinged 的简写，int 是 integer 的简写，示例如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> x </span><span style="color:#D73A49;">int8</span><span style="color:#D73A49;"> =</span><span style="color:#005CC5;"> 1</span><span style="color:#6A737D;">      // 有符号8位，范围：-128 ~ 127</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> y </span><span style="color:#D73A49;">uint8</span><span style="color:#D73A49;"> =</span><span style="color:#D73A49;"> -</span><span style="color:#005CC5;">1</span><span style="color:#6A737D;">    // 无符号8位，范围：0 ~ 255</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>长度有 8、16、32、64 和 int 五种，其中 int 取决于操作系统，在 32 位操作系统上 int 长度为 32，在 64 位操作系统上 int 长度为 64。两两组合，共有如下类型：</p><table><thead><tr><th>符号</th><th>8 位</th><th>16 位</th><th>32 位</th><th>64 位</th><th>系统位</th></tr></thead><tbody><tr><td>有符号</td><td>int8</td><td>int16</td><td>int32(rune)</td><td>int64</td><td>int</td></tr><tr><td>无符号</td><td>uint8(byte)</td><td>uint16</td><td>uint32</td><td>uint64</td><td>uint</td></tr></tbody></table><h3 id="浮点型" tabindex="-1">浮点型 <a class="header-anchor" href="#浮点型" aria-label="Permalink to &quot;浮点型&quot;">​</a></h3><p>浮点型，分为 float32(单精度) 和 float64(双精度) 两种，浮点数都是有符号的。其中，点指的是小数点，浮点指小数点的位置是浮动的。示例如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> x </span><span style="color:#D73A49;">float32</span><span style="color:#D73A49;"> =</span><span style="color:#005CC5;"> 0.1</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> y </span><span style="color:#D73A49;">float64</span><span style="color:#D73A49;"> =</span><span style="color:#005CC5;"> 0.1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="布尔型" tabindex="-1">布尔型 <a class="header-anchor" href="#布尔型" aria-label="Permalink to &quot;布尔型&quot;">​</a></h3><p>包含两个值：true(真) 和 false(假)，示例如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> t </span><span style="color:#D73A49;">bool</span><span style="color:#D73A49;"> =</span><span style="color:#005CC5;"> true</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> f </span><span style="color:#D73A49;">bool</span><span style="color:#D73A49;"> =</span><span style="color:#005CC5;"> false</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="复杂变量" tabindex="-1">复杂变量 <a class="header-anchor" href="#复杂变量" aria-label="Permalink to &quot;复杂变量&quot;">​</a></h2><h3 id="数组" tabindex="-1">数组 <a class="header-anchor" href="#数组" aria-label="Permalink to &quot;数组&quot;">​</a></h3><p>语法如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> &lt;name</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> [</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">length</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">]</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">type</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">{</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">index</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">init</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">value</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">...</span><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>其中 length 可以指定为 ... 表示长度根据后面的初始值声明进行推断；cap 方法用于获取数组的容量，len 方法用于定义数组的长度，如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> a1 [</span><span style="color:#005CC5;">5</span><span style="color:#24292E;">]</span><span style="color:#D73A49;">int</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">a1[</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;"> 1</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">a1[</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;"> 2</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">cap</span><span style="color:#24292E;">(a1));</span></span>
<span class="line"><span style="color:#24292E;">fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">len</span><span style="color:#24292E;">(a1));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>除了可以使用 for index 遍历数组，也可以使用迭代器进行遍历，如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> a2 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [</span><span style="color:#D73A49;">...</span><span style="color:#24292E;">]</span><span style="color:#D73A49;">int</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">4</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">6</span><span style="color:#24292E;">};</span></span>
<span class="line"><span style="color:#D73A49;">for</span><span style="color:#24292E;"> index, value </span><span style="color:#D73A49;">:=</span><span style="color:#D73A49;"> range</span><span style="color:#24292E;"> a2 {</span></span>
<span class="line"><span style="color:#24292E;">	fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(index, value)</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 结果：</span></span>
<span class="line"><span style="color:#6A737D;">// 0 0</span></span>
<span class="line"><span style="color:#6A737D;">// 1 3</span></span>
<span class="line"><span style="color:#6A737D;">// 2 0</span></span>
<span class="line"><span style="color:#6A737D;">// 3 0</span></span>
<span class="line"><span style="color:#6A737D;">// 4 6</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="切片" tabindex="-1">切片 <a class="header-anchor" href="#切片" aria-label="Permalink to &quot;切片&quot;">​</a></h3><p>切片与数组类似，区别在于数组是定长的，切片是变长的，因此在数组长度的语法上不指定长度接口，如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> s1 []init            </span><span style="color:#6A737D;">// 空切片</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> s2 </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;"> make</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">int</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">5</span><span style="color:#24292E;">) </span><span style="color:#6A737D;">// 长度为3，容量为5的切片</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">s3 </span><span style="color:#D73A49;">:=</span><span style="color:#24292E;"> arr[</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>备注：new 和 make 都是用于创建和初始化对象的内置函数，区别如下：new 用于各种类型的内存分配，将其初始化为零值返回内存指针；make用于内建类型的分配(map/slice/channel)，(make(type, len, cap)) 返回已初始化的值。</p><blockquote><p>值类型：string int float boolean array struct; 引用类型：slice map chan pointer</p></blockquote><h3 id="map" tabindex="-1">map <a class="header-anchor" href="#map" aria-label="Permalink to &quot;map&quot;">​</a></h3><p>语法：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#6A737D;">// 方式1：不能直接使用，默认为nil</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> m1 </span><span style="color:#D73A49;">map</span><span style="color:#24292E;">[</span><span style="color:#D73A49;">int</span><span style="color:#24292E;">]</span><span style="color:#D73A49;">string</span></span>
<span class="line"><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (m1 </span><span style="color:#D73A49;">==</span><span style="color:#005CC5;"> nil</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  m1 </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;"> make</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">map</span><span style="color:#24292E;">[</span><span style="color:#D73A49;">int</span><span style="color:#24292E;">]</span><span style="color:#D73A49;">string</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 方式2</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> m2 </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;"> make</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">map</span><span style="color:#24292E;">[</span><span style="color:#D73A49;">int</span><span style="color:#24292E;">]</span><span style="color:#D73A49;">string</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>使用迭代器进行遍历，但顺序无法保证，如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> m1 </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;"> make</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">map</span><span style="color:#24292E;">[</span><span style="color:#D73A49;">int</span><span style="color:#24292E;">]</span><span style="color:#D73A49;">string</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">m1[</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> &quot;A&quot;</span></span>
<span class="line"><span style="color:#24292E;">m2[</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> &quot;B&quot;</span></span>
<span class="line"><span style="color:#24292E;">m3[</span><span style="color:#005CC5;">3</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> &quot;C&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">for</span><span style="color:#24292E;"> key, value </span><span style="color:#D73A49;">:=</span><span style="color:#D73A49;"> range</span><span style="color:#24292E;"> m1 {</span></span>
<span class="line"><span style="color:#24292E;">  fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(key, value)</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>map 不是并发安全的，因此 Go 在 v1.9 版本推出并发安全的 sync.Map，如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> m1 sync.Map</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">m1.</span><span style="color:#005CC5;">Store</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;A&quot;</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">97</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">m1.</span><span style="color:#005CC5;">Load</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;A&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">m1.</span><span style="color:#005CC5;">Delete</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;A&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">m1.</span><span style="color:#005CC5;">Range</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">func</span><span style="color:#24292E;">(k, v </span><span style="color:#D73A49;">interface</span><span style="color:#24292E;">{}) </span><span style="color:#D73A49;">bool</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(k, v)</span></span>
<span class="line"><span style="color:#D73A49;">    return</span><span style="color:#005CC5;"> true</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="函数" tabindex="-1">函数 <a class="header-anchor" href="#函数" aria-label="Permalink to &quot;函数&quot;">​</a></h3><p>函数，需要声明好参数类型和返回值类型，且与其他语言不一样的是，Go 的函数支持多返回值，语法如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">func</span><span style="color:#D73A49;"> &lt;</span><span style="color:#24292E;">name</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">name</span><span style="color:#D73A49;">&gt;</span><span style="color:#D73A49;"> &lt;</span><span style="color:#24292E;">type</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">...</span><span style="color:#24292E;">) (</span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;">name</span><span style="color:#D73A49;">&gt;</span><span style="color:#D73A49;"> &lt;</span><span style="color:#24292E;">type</span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;">, </span><span style="color:#D73A49;">...</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#6A737D;">  // 函数体</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>返回声明中的名字可以在函数体中使用，如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">func</span><span style="color:#6F42C1;"> SumAndProduct</span><span style="color:#24292E;">(A, B </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">) (add </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">, Multiplied </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">	add </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> A</span><span style="color:#D73A49;">+</span><span style="color:#24292E;">B</span></span>
<span class="line"><span style="color:#24292E;">	Multiplied </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> A</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">B</span></span>
<span class="line"><span style="color:#D73A49;">	return</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>参数支持可变参数，如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">func</span><span style="color:#6F42C1;"> print</span><span style="color:#24292E;">(c </span><span style="color:#D73A49;">...</span><span style="color:#D73A49;">string</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#D73A49;">  for</span><span style="color:#24292E;"> k,v </span><span style="color:#D73A49;">=</span><span style="color:#D73A49;"> range</span><span style="color:#24292E;"> c {</span></span>
<span class="line"><span style="color:#24292E;">    fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(v)</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>参数默认是按值传递，无论是简单变量还是复杂变量都会复制一份。 如果要修改原值，需要传递指针类型的变量，如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">type</span><span style="color:#6F42C1;"> P</span><span style="color:#D73A49;"> struct</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">	age </span><span style="color:#D73A49;">int</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> p </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> P{age: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">func</span><span style="color:#6F42C1;"> increaseAge</span><span style="color:#24292E;">(p P) P {</span></span>
<span class="line"><span style="color:#24292E;">	p.age </span><span style="color:#D73A49;">+=</span><span style="color:#005CC5;"> 1</span></span>
<span class="line"><span style="color:#D73A49;">	return</span><span style="color:#24292E;"> p</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">func</span><span style="color:#6F42C1;"> main</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">	fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;age: %i&quot;</span><span style="color:#24292E;">, p.age)         </span><span style="color:#6A737D;">// 1</span></span>
<span class="line"><span style="color:#24292E;">	p1 </span><span style="color:#D73A49;">:=</span><span style="color:#005CC5;"> increaseAge</span><span style="color:#24292E;">(p)</span></span>
<span class="line"><span style="color:#24292E;">	fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;p age: %i&quot;</span><span style="color:#24292E;">, p.age)       </span><span style="color:#6A737D;">// 1</span></span>
<span class="line"><span style="color:#24292E;">	fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;p1 age: %i&quot;</span><span style="color:#24292E;">, p1.age)     </span><span style="color:#6A737D;">// 2</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>函数可以延迟执行，使用 defer 会在在函数结束时逆序执行，如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">func</span><span style="color:#6F42C1;"> ReadWrite</span><span style="color:#24292E;">() </span><span style="color:#D73A49;">bool</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">	file.</span><span style="color:#005CC5;">Open</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;file&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">	defer</span><span style="color:#24292E;"> file.</span><span style="color:#005CC5;">Close</span><span style="color:#24292E;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">	if</span><span style="color:#24292E;"> A {</span></span>
<span class="line"><span style="color:#D73A49;">		return</span><span style="color:#005CC5;"> false</span></span>
<span class="line"><span style="color:#24292E;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">	if</span><span style="color:#24292E;"> B {</span></span>
<span class="line"><span style="color:#D73A49;">		return</span><span style="color:#005CC5;"> false</span></span>
<span class="line"><span style="color:#24292E;">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">	return</span><span style="color:#005CC5;"> true</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>函数也是变量，可以作为参数传递，如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">type</span><span style="color:#6F42C1;"> add</span><span style="color:#D73A49;"> func</span><span style="color:#24292E;"> (x </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">, y </span><span style="color:#D73A49;">int</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">int</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">func</span><span style="color:#6F42C1;"> run</span><span style="color:#24292E;">(fn add) </span><span style="color:#D73A49;">int</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#D73A49;">  return</span><span style="color:#005CC5;"> fn</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在 Go 中，异常是返回值的一部分，当发生未处理的异常时，会触发 panic 中断程序退出，panic 可以使用 recover 拦截，但必须在defer函数中使用，如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">func</span><span style="color:#6F42C1;"> throwsPanic</span><span style="color:#24292E;">(f </span><span style="color:#D73A49;">func</span><span style="color:#24292E;">()) (b </span><span style="color:#D73A49;">bool</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#D73A49;">	defer</span><span style="color:#D73A49;"> func</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#D73A49;">		if</span><span style="color:#24292E;"> x </span><span style="color:#D73A49;">:=</span><span style="color:#005CC5;"> recover</span><span style="color:#24292E;">(); x </span><span style="color:#D73A49;">!=</span><span style="color:#005CC5;"> nil</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">			b </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;"> true</span></span>
<span class="line"><span style="color:#24292E;">		}</span></span>
<span class="line"><span style="color:#24292E;">	}()</span></span>
<span class="line"><span style="color:#005CC5;">	f</span><span style="color:#24292E;">() </span><span style="color:#6A737D;">//执行函数f，如果f中出现了panic，那么就可以恢复回来</span></span>
<span class="line"><span style="color:#D73A49;">	return</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Go里面有两个保留的函数：init函数（能够应用于所有的package）和main函数（只能应用于package main）。程序的初始化和执行都起始于main包。如果main包还导入了其它的包，那么就会在编译时将它们依次导入。如下：</p><p><div class="arco-image arco-image-with-footer-inner cursor-pointer" style=""><img class="arco-image-img" style="" alt="image"><div class="arco-image-overlay"><!--v-if--><!--v-if--></div><!--v-if--><!--v-if--></div></p><h3 id="指针" tabindex="-1">指针 <a class="header-anchor" href="#指针" aria-label="Permalink to &quot;指针&quot;">​</a></h3><p>指针，是一种特殊变量，保存的是普通变量的内存地址。使用 &amp; 获取变量的地址，使用 * 获取指针变量指向地址的值，示例如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> s1 </span><span style="color:#D73A49;">=</span><span style="color:#032F62;"> &quot;字符串&quot;</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> s2 </span><span style="color:#D73A49;">=</span><span style="color:#D73A49;"> &amp;</span><span style="color:#24292E;">s1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">*</span><span style="color:#24292E;">s2)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="结构体" tabindex="-1">结构体 <a class="header-anchor" href="#结构体" aria-label="Permalink to &quot;结构体&quot;">​</a></h3><p>结构体类似于类，有属性和方法，属性一开始就在结构体中声明，但方法需要单独声明。使用结构体，先声明好类型，然后再实例化(没有 new)，示例如下：</p><p>语法：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#6A737D;">// 1. 声明属性类型</span></span>
<span class="line"><span style="color:#D73A49;">type</span><span style="color:#6F42C1;"> Persion</span><span style="color:#D73A49;"> struct</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  Name </span><span style="color:#D73A49;">string</span><span style="color:#032F62;"> `json: &quot;name&quot;`</span></span>
<span class="line"><span style="color:#24292E;">  Age  </span><span style="color:#D73A49;">int</span><span style="color:#032F62;">    `json: &quot;age&quot;`</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 2. 实例化</span></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> p2 </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Persion {</span></span>
<span class="line"><span style="color:#24292E;">  Name: </span><span style="color:#032F62;">&quot;A&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  Age: </span><span style="color:#005CC5;">1</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>以上，第 1 步的声明语法有些奇怪，要分成两部分理解：type 是一个用于声明的关键字(类似于 var 和 const)，语法为 <code>type &lt;alias&gt; &lt;name&gt;</code>。</p><p>标签(tag)</p><p>匿名字段，即只提供类型，不提供字段名。当匿名字段是一个struct的时候，那么这个struct所拥有的全部字段都被隐式地引入当前struct。如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">type</span><span style="color:#6F42C1;"> Human</span><span style="color:#D73A49;"> struct</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  name </span><span style="color:#D73A49;">string</span></span>
<span class="line"><span style="color:#24292E;">  age </span><span style="color:#D73A49;">int</span></span>
<span class="line"><span style="color:#24292E;">  weight </span><span style="color:#D73A49;">int</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">type</span><span style="color:#6F42C1;"> Student</span><span style="color:#D73A49;"> struct</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  Human</span></span>
<span class="line"><span style="color:#D73A49;">  int</span></span>
<span class="line"><span style="color:#24292E;">  speciality </span><span style="color:#D73A49;">string</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">var</span><span style="color:#24292E;"> p </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Human {}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">p.Human.name </span><span style="color:#6A737D;">// 正常访问</span></span>
<span class="line"><span style="color:#24292E;">p.name       </span><span style="color:#6A737D;">// 直接访问</span></span>
<span class="line"><span style="color:#24292E;">p.int </span><span style="color:#D73A49;">=</span><span style="color:#005CC5;"> 3</span><span style="color:#6A737D;">    // 普通类型</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>方法，方法就是特殊的函数，它的第1个参数是结构：A method is a function with an implicit first argument, called a receiver.如下：</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">func</span><span style="color:#24292E;"> (p </span><span style="color:#D73A49;">*</span><span style="color:#24292E;">Persion) </span><span style="color:#6F42C1;">say</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  fmt.</span><span style="color:#005CC5;">Pringln</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;my name is </span><span style="color:#005CC5;">%s</span><span style="color:#032F62;">&quot;</span><span style="color:#24292E;">, p.name)</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>为什么要单独写呢，因为要考虑接收者既可以是普通变量，也可以是指针类型。</p><p>接收者可以是普通类型或指针类型，方法也可以继承和重写。</p><h3 id="反射" tabindex="-1">反射 <a class="header-anchor" href="#反射" aria-label="Permalink to &quot;反射&quot;">​</a></h3><p>反射(类似于镜子)，输入是变量，输出是反射信息，例如变量类型或变量值等信息。</p><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-light vp-code"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#032F62;">  &quot;</span><span style="color:#6F42C1;">fmt</span><span style="color:#032F62;">&quot;</span></span>
<span class="line"><span style="color:#032F62;">  &quot;</span><span style="color:#6F42C1;">reflect</span><span style="color:#032F62;">&quot;</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">func</span><span style="color:#6F42C1;"> main</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  n1 </span><span style="color:#D73A49;">:=</span><span style="color:#005CC5;"> 8</span></span>
<span class="line"><span style="color:#24292E;">  fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(reflect.</span><span style="color:#005CC5;">TypeOf</span><span style="color:#24292E;">(n1))</span></span>
<span class="line"><span style="color:#24292E;">  fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(reflect.</span><span style="color:#005CC5;">ValueOf</span><span style="color:#24292E;">(n1))</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// 输出：</span></span>
<span class="line"><span style="color:#6A737D;">// int</span></span>
<span class="line"><span style="color:#6A737D;">// 8</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="协程" tabindex="-1">协程 <a class="header-anchor" href="#协程" aria-label="Permalink to &quot;协程&quot;">​</a></h3><p>协程(routine)，概念上类似线程(thread)，核心不同点在于：线程(或进程)是操作系统级别的概念，而协程只是语言层次上的概念。</p><p>可以理解为，协程是 Go 语言内部对线程的虚拟实现，目的是利用物理机的多核优势，实现并发处理。优点是启动快，占用资源少。</p><h2 id="结语" tabindex="-1">结语 <a class="header-anchor" href="#结语" aria-label="Permalink to &quot;结语&quot;">​</a></h2><p>总体而言，比较通俗且容易上手，但比较奇怪的是多变量声明语法和短变量语法。多变量声明语法，可能对于声明多个同类型的变量比较实用，其他暂时想不到其便捷性是怎么设置的。而短变量语法，感觉略显随意且会覆盖同名变量，是优点也算是缺点吧。</p></div></div></main><footer class="VPDocFooter" data-v-fa248dc2 data-v-a953259f><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--v-if--><footer class="text-gray-500 text-sm text-center pt-6 pb-5"><div><ul class="list-none flex gap-2 justify-center items-center"><li>已有 34 篇文章</li><li class="text-xs">|</li><li>已运行 323 天</li><li class="text-xs">|</li><li>最近更新于 几秒前</li></ul></div><div class="mt-1"> Copyright © 2023 绝弹博客 <a href="https://beian.miit.gov.cn/" target="_blank" class="hover:text-[var(--vp-c-brand)] hover:underline underline-offset-2"> 桂ICP备2021001859号-1 </a></div></footer><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"archive_index.md\":\"APeueolf\",\"draft_vue3-composition_index.md\":\"WCU7jmIB\",\"interview_post-implement.md\":\"4H5vkci0\",\"rust_01.start_index.md\":\"38vJleiD\",\"rust_06.collection_index.md\":\"tQeFTJv0\",\"frontend_vitepress-blog_index.md\":\"oIJCV3Z9\",\"go_03.module_index.md\":\"56vtSEnB\",\"frontend_browser-cache_post-browser-cache.md\":\"7bBxWvaL\",\"go_01.start_index.md\":\"ZRktlypu\",\"frontend_tool-ejs_index.md\":\"fuKOXgtQ\",\"frontend_js-priority_index.md\":\"VxBs6jf3\",\"go_02.var_index.md\":\"ZU2ezGIE\",\"frontend_index.md\":\"28PNAX4i\",\"frontend_browser-download_index.md\":\"w6MI8w0e\",\"rust_05.struct_index.md\":\"fPvCd-45\",\"draft_cookie_index.md\":\"7eqfcPyy\",\"draft_gitea-actions_index.md\":\"FcS5MX4K\",\"draft_goframe_index.md\":\"UleQ5z97\",\"rust_04.ownership_index.md\":\"HolVRtK2\",\"rust_02.basic_index.md\":\"zqdF5Sby\",\"draft_bash.md\":\"fequrYMH\",\"rust_03.crate_index.md\":\"z4kaK9l9\",\"rust_07.macro_index.md\":\"mL1MlP36\",\"about_index.md\":\"EGkcZ34s\",\"frontend_js-module-types_index.md\":\"PSUR-N34\",\"tools_crawlee_index.md\":\"6nLh-ryn\",\"go_ident_index.md\":\"3tCg7ad6\",\"tools_devops_index.md\":\"wGirAnm0\",\"tools_emby-unlock-server_index.md\":\"RAg5pQRc\",\"draft_transform-translate-scale_index.md\":\"L-K3guLj\",\"tools_vite-plugin-build-info_index.md\":\"xazRrGLw\",\"tools_npm-package-json_index.md\":\"jihUvlsa\",\"tools_pnpm-patch_index.md\":\"gkRL5WOj\",\"tools_rollup-static_index.md\":\"PaH7ahse\",\"tools_ssh-remote_index.md\":\"1wHHXadt\",\"tools_git_index.md\":\"HNIYmo17\",\"tools_node-alpine-sqlite3_index.md\":\"T0MVi6vo\",\"tools_http-orign-host-referer_index.md\":\"Ij2XFMrD\",\"vue_vue-load-from-url_index.md\":\"_E8LRsOE\",\"tools_web-audio_index.md\":\"tUk8-d2O\",\"tools_nest-swagger_index.md\":\"5Pq8_7SN\",\"tools_cicd_index.md\":\"0kN2xffD\",\"tools_tampermonkey_index.md\":\"O5ftN_Go\",\"index.md\":\"3yshEgKy\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"绝弹博客\",\"titleTemplate\":\":title | 绝弹博客\",\"description\":\"一位前端开发者的博客\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":false,\"themeConfig\":{\"logo\":\"/favicon.ico\",\"search\":{\"provider\":\"local\",\"options\":{\"translations\":{\"button\":{\"buttonText\":\"搜索\",\"buttonAriaLabel\":\"搜索\"},\"modal\":{\"noResultsText\":\"没有找到结果\",\"resetButtonTitle\":\"重置搜索\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"移动\",\"closeText\":\"关闭\"}}}}},\"outline\":{\"label\":\"本篇目录\",\"level\":[2,3]},\"nav\":[{\"text\":\"首页\",\"icon\":\"i-icon-park-outline-home\",\"link\":\"/\"},{\"text\":\"归档\",\"icon\":\"i-icon-park-outline-time\",\"link\":\"/archive/\"},{\"text\":\"关于\",\"icon\":\"i-icon-park-outline-user\",\"link\":\"/about/\"}],\"sidebar\":{\"/frontend/1\":[{\"text\":\"基础知识\",\"items\":[{\"text\":\"HTML中的标签有多少个?\",\"link\":\"/front-end/a\"},{\"text\":\"Runtime API示例\",\"link\":\"/front-end/b\"}]},{\"text\":\"工具类库\",\"items\":[{\"text\":\"Lodash在日常开发中有用的函数\"}]},{\"text\":\"vue\",\"items\":[{\"text\":\"如何将.vue文件编译成js文件?\"}]},{\"text\":\"浏览器\",\"items\":[{\"text\":\"浏览器Console面板中有用的调试技巧\"},{\"text\":\"如何利用EJS模板引擎辅助生成代码?\",\"link\":\"/front-end/ejs-generate-code\"},{\"text\":\"项目中的字典常量应该如何维护?\"},{\"text\":\"从new xx()和new xx的区别聊聊JS中操作符的优先级问题\",\"link\":\"/front-end/js-operator-priority\"},{\"text\":\"TailwindCSS中一些有意思的用法和实现\"},{\"text\":\"函数柯里化是什么如何实现它?\"},{\"text\":\"写一个VITE插件: 根据配置加载不同后缀的文件\"}]}]},\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":true}");</script>
    
  </body>
</html>