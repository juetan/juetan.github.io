---
title: 基于Web API实现麦克风录音并保存为wav文件
date: 2023-07-22 08:0000
---

最近遇到了一个需求，使用电脑外接的话筒推流发广播，这里面涉及到了 Web RTC的一些功能以及音频数据的处理。以前做过监听功能，接收pcm流并实时播放，因此对音频数据流略有了解，但如何从麦克风接流还不太了解。做了好几天，最终完成了，这里简单回顾下并做个小demo。

## 声音的采集

当我们说话时，录音设备是如何采集的呢？首先，录音设备根据声音产生的振幅，采集到的是波形(即模拟信号)，不能直接用数字表示，需要转为数字信号才能用数字表示，这过程称之为采样。

第一步，根据一定的频率采样，例如1秒钟采样100个样本，这个称之为采样率，常见的有44.1HZ即每秒钟采集44100个样本；每个样本都要转化为数字，例如0是静音，10表示最大音，这个范围称之为位深，常见的有16位；除了这些，人有两个耳朵，采集的时候也可以分为两部分，成为左声道和右声道，称之为声道。

以上做完后，得到的数据称之为裸流，